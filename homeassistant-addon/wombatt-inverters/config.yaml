name: "Wombatt for Inverters"
version: 0.5.1
slug: wombatt-inverters
description: Monitors inverters
arch:
  - aarch64
  - amd64
  - armv7
url: https://github.com/gonzalop/wombatt
panel_icon: mdi:solar-power
startup: application
boot: auto
usb: true
uart: true
services:
  - "mqtt:want"
options:
  # Common options (apply to both modes)
  # MQTT configuration
  mqtt_config:
    auto_discovery: true  # Automatically discover MQTT configuration
    address: "core-mosquitto:1883"  # MQTT broker address
    mqtt_user: ""  # MQTT username (optional)
    mqtt_password: ""  # MQTT password (optional)
    topic_prefix: homeassistant  # Prefix for MQTT topics
  # Inverter monitoring configuration (used when mode=inverters)
  inverters:
    baud_rate: 2400  # Baud rate for serial communication
    data_bits: 8  # Data bits for serial communication
    stop_bits: 1  # Stop bits for serial communication
    parity: N  # Parity: N (none), E (even), or O (odd)
    modbus_id: 1  # Modbus slave ID (only used for solark, eg4_18kpv, and eg4_6000xp inverters)
    monitors: ""  # Comma-separated list of monitors (e.g., /dev/ttyUSB0,QPIRI,inverter1)
    protocol: auto  # Protocol: auto, ModbusRTU, or ModbusTCP
    poll_interval: 10s  # Time between polling cycles (e.g., 10s, 1m)
    read_timeout: 5s  # Timeout when reading from devices
    device_type: serial  # Device type: serial, hidraw, or tcp
  # Logging configuration
  logging:
    level: info  # Log level: debug, info, warn, or error
schema:
  mqtt_config:
    auto_discovery: "bool?"
    address: "str?"
    mqtt_user: "str?"
    mqtt_password: "str?"
    topic_prefix: "str?"
  inverters:
    baud_rate: "int?"
    data_bits: "int?"
    stop_bits: "int?"
    parity: "list(N|E|O)?"
    modbus_id: "int?"
    monitors: "str"
    protocol: "list(auto|ModbusRTU|ModbusTCP)?"
    poll_interval: "str?"
    read_timeout: "str?"
    device_type: "list(serial|hidraw|tcp)?"
  logging:
    level: "list(debug|info|warn|error)?"

